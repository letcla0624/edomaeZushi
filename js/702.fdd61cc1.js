"use strict";(self["webpackChunkedomaeZushi"]=self["webpackChunkedomaeZushi"]||[]).push([[702],{5743:function(t,e,s){s.d(e,{Z:function(){return d}});s(7658);function a(t){return{all:t=t||new Map,on:function(e,s){var a=t.get(e);a?a.push(s):t.set(e,[s])},off:function(e,s){var a=t.get(e);a&&(s?a.splice(a.indexOf(s)>>>0,1):t.set(e,[]))},emit:function(e,s){var a=t.get(e);a&&a.slice().map((function(t){t(s)})),(a=t.get("*"))&&a.slice().map((function(t){t(e,s)}))}}}const l=a();var d=l},2036:function(t,e,s){s.d(e,{Z:function(){return _},J:function(){return g}});var a=s(3396),l=s(2362);const d={class:"modal fade",tabindex:"-1",ref:"delAllModal"},i={class:"modal-dialog modal-dialog-centered"},o={class:"modal-content rounded-0 border border-dark border-2 paper"},n=(0,a.uE)('<div class="modal-header justify-content-center border-0"><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="z-index:2;"></button></div><div class="modal-body px-4 px-lg-5"><div class="text-center mb-2 position-absolute" style="top:-113px;left:0;"><img src="'+l+'" alt="delete" style="width:90px;transform:scaleX(-1);"></div><h5 class="modal-title text-center"><span class="text-danger fw-bold mx-1"> すべて削除してもよろしいですか？ </span></h5></div>',2),c={class:"modal-footer border-top-0 justify-content-center mb-4"},r=["disabled"],m={key:0,class:"spinner-border spinner-border-sm align-middle",role:"status"},u=(0,a._)("span",{class:"visually-hidden"},"Loading...",-1),p=[u],b={key:1,class:"bi bi-trash-fill me-1"};function h(t,e,s,l,u,h){return(0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("div",i,[(0,a._)("div",o,[n,(0,a._)("div",c,[(0,a._)("button",{type:"button",class:"btn btn-link","data-bs-dismiss":"modal",onClick:e[0]||(e[0]=e=>t.$emit("del-item"))}," キャンセル "),(0,a._)("button",{type:"button",class:"btn btn-outline-danger",onClick:e[1]||(e[1]=(...t)=>h.deleteCarts&&h.deleteCarts(...t)),disabled:"cart"===u.isLoading},["cart"===u.isLoading?((0,a.wg)(),(0,a.iD)("div",m,p)):((0,a.wg)(),(0,a.iD)("i",b)),(0,a.Uk)(" 削除を確認 ")],8,r)])])])],512)}let g=null;var v={data(){return{isLoading:""}},props:["page"],methods:{deleteCarts(){this.isLoading="cart";let t="";"cart"===this.page?t="https://vue3-course-api.hexschool.io/v2/api/letcla/carts":"adminOrders"===this.page&&(t="https://vue3-course-api.hexschool.io/v2/api/letcla/admin/orders/all"),this.$http.delete(t).then((()=>{this.isLoading="",this.$emit("get-item"),g.hide()})).catch((t=>{this.isLoading="",g.hide(),alert(t.response.data.message)}))}},mounted(){g=new bootstrap.Modal(this.$refs.delAllModal,{keyboard:!1})}},y=s(89);const f=(0,y.Z)(v,[["render",h]]);var _=f},2569:function(t,e,s){s.r(e),s.d(e,{default:function(){return Ot}});var a=s(3396),l=s(7139),d=s(9242);const i={class:"main"},o={class:"container py-3 py-lg-5"},n={class:"text-center py-5"},c=(0,a._)("h2",{class:"display-6"},"ショッピングカート",-1),r=["disabled"],m=(0,a._)("i",{class:"bi bi-trash3 me-1"},null,-1),u={key:0,class:"row"},p={class:"text-center my-5","data-aos":"fade-down","data-aos-delay":"300","data-aos-duration":"1000"},b=(0,a._)("i",{class:"bi bi-basket-fill text-light-green fs-2"},null,-1),h=(0,a._)("h3",{class:"h5 mt-2 mb-5"},"カートに商品は入っていません。",-1),g={key:1,class:"row"},v={class:"col-xl-10 offset-xl-1 pb-5"},y=(0,a.uE)('<div class="row border-bottom py-3 d-none d-md-flex"><div class="col-md-1"><h6 class="text-center"></h6></div><div class="col-md-6"><h6 class="ps-md-4 ps-lg-5">寿司</h6></div><div class="col-md-3"><h6 class="text-center">数量</h6></div><div class="col-md-2"><h6 class="text-end">価格</h6></div></div>',1),f={class:"col-1 text-center d-none d-md-block"},_=["onClick"],w=(0,a._)("i",{class:"bi bi-trash3 fs-5d5"},null,-1),k=[w],x={class:"col-12 col-md-6"},C={class:"cart"},D={class:"row g-0 align-items-center"},L={class:"col-4 col-sm-3"},I=["src","alt"],$={class:"col-8 col-sm-9"},M={class:"cart-body ps-2 pe-0"},q={class:"d-flex justify-content-between d-md-block"},U={class:"cart-title h6 fw-bold me-4"},j={class:"text-secondary fs-7 mb-0 d-none d-md-block"},Z={class:"d-md-none text-center"},z={key:0,style:{width:"45px",height:"21px"}},A=(0,a._)("div",{class:"spinner-border spinner-border-sm align-middle",role:"status"},[(0,a._)("span",{class:"visually-hidden"},"Loading...")],-1),J=[A],W={key:1,class:"fw-bold fs-7 text-nowrap mb-0"},Y={class:"d-flex justify-content-between my-3 d-md-none"},G={class:"d-inline-flex border"},P=["onClick","disabled"],V=(0,a._)("i",{class:"bi bi-dash-lg"},null,-1),T=[V],E=["onUpdate:modelValue"],O=["onClick","disabled"],X=(0,a._)("i",{class:"bi bi-plus-lg"},null,-1),H=[X],K=["onClick","disabled"],R=(0,a._)("i",{class:"bi bi-trash3 fs-5d5"},null,-1),S=[R],B={class:"col-3 text-center d-none d-md-block"},F={class:"d-inline-flex border"},N=["onClick","disabled"],Q=(0,a._)("i",{class:"bi bi-dash-lg"},null,-1),tt=[Q],et=["onUpdate:modelValue"],st=["onClick","disabled"],at=(0,a._)("i",{class:"bi bi-plus-lg"},null,-1),lt=[at],dt={class:"col-2 text-end d-none d-md-block"},it={class:""},ot={key:0,class:"ms-auto text-center",style:{width:"45px",height:"24px"}},nt=(0,a._)("div",{class:"spinner-border spinner-border-sm align-middle",role:"status"},[(0,a._)("span",{class:"visually-hidden"},"Loading...")],-1),ct=[nt],rt={key:1,class:"fw-bold mb-0"},mt={class:"row border-top border-dark py-3"},ut={class:"text-end"},pt={class:"fs-5d5 fw-bold"},bt=(0,a._)("p",{class:"fs-8 text-secondary"}," チェックアウト時に計算された送料と税金 ",-1),ht={class:"row mb-5"},gt={class:"d-grid gap-3 col-md-12 col-lg-6 d-md-flex align-items-center ms-auto mt-4 mt-md-3"},vt=(0,a._)("i",{class:"bi bi-chevron-left me-1"},null,-1);function yt(t,e,s,w,A,V){const X=(0,a.up)("RouterLink"),R=(0,a.up)("DelModalComp"),Q=(0,a.up)("DelAllModalComp");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",o,[(0,a._)("div",n,[c,0!==A.cart.carts.length?((0,a.wg)(),(0,a.iD)("button",{key:0,type:"button",class:"btn btn-link",onClick:e[0]||(e[0]=t=>V.openDelAllModal("cart")),disabled:0===A.cart.carts.length},[m,(0,a.Uk)("カートを削除する ")],8,r)):(0,a.kq)("",!0)]),0===A.cart.carts.length?((0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("div",p,[b,h,(0,a.Wm)(X,{to:"/products",class:"btn hvr-btn-dark"},{default:(0,a.w5)((()=>[(0,a.Uk)(" ショッピングを続ける ")])),_:1})])])):((0,a.wg)(),(0,a.iD)("div",g,[(0,a._)("div",v,[y,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(A.cart.carts,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"row align-items-center",key:e.id},[(0,a._)("div",f,[(0,a._)("button",{type:"button",class:"btn",onClick:t=>V.openDelModal(e)},k,8,_)]),(0,a._)("div",x,[(0,a._)("div",C,[(0,a._)("div",D,[(0,a._)("div",L,[(0,a._)("img",{src:e.product.imageUrl,alt:e.product.title,class:"img-fluid rounded-start w-100"},null,8,I)]),(0,a._)("div",$,[(0,a._)("div",M,[(0,a._)("div",q,[(0,a.Wm)(X,{to:`/prod/${e.product.id}`},{default:(0,a.w5)((()=>[(0,a._)("h5",U,(0,l.zw)(e.product.title),1)])),_:2},1032,["to"]),(0,a._)("p",j," 単価："+(0,l.zw)(t.$filters.currencyJPY(e.product.price)),1),(0,a._)("div",Z,[A.isLoading===e.id?((0,a.wg)(),(0,a.iD)("div",z,J)):((0,a.wg)(),(0,a.iD)("p",W,(0,l.zw)(t.$filters.currencyJPY(e.total)),1))])]),(0,a._)("div",Y,[(0,a._)("div",G,[(0,a._)("button",{type:"button",class:"btn btn-sm",onClick:t=>V.minusItem(e),disabled:A.isLoading===e.id},T,8,P),(0,a.wy)((0,a._)("input",{type:"number",class:"form-control text-center border-0",min:"1","onUpdate:modelValue":t=>e.qty=t,style:{width:"40px"},readonly:""},null,8,E),[[d.nr,e.qty,void 0,{number:!0}]]),(0,a._)("button",{type:"button",class:"btn btn-sm",onClick:t=>V.addItem(e),disabled:A.isLoading===e.id},H,8,O)]),(0,a._)("button",{type:"button",class:"btn",style:{width:"45px"},onClick:t=>V.openDelModal(e),disabled:A.isLoading===e.id},S,8,K)])])])])])]),(0,a._)("div",B,[(0,a._)("div",F,[(0,a._)("button",{type:"button",class:"btn",onClick:t=>V.minusItem(e),disabled:A.isLoading===e.id},tt,8,N),(0,a.wy)((0,a._)("input",{type:"number",class:"form-control text-center border-0",min:"1","onUpdate:modelValue":t=>e.qty=t,style:{width:"50px"},readonly:""},null,8,et),[[d.nr,e.qty]]),(0,a._)("button",{type:"button",class:"btn",onClick:t=>V.addItem(e),disabled:A.isLoading===e.id},lt,8,st)])]),(0,a._)("div",dt,[(0,a._)("div",it,[A.isLoading===e.id?((0,a.wg)(),(0,a.iD)("div",ot,ct)):((0,a.wg)(),(0,a.iD)("p",rt,(0,l.zw)(t.$filters.currencyJPY(e.total)),1))])])])))),128)),(0,a._)("div",mt,[(0,a._)("div",ut,[(0,a._)("h5",pt,[(0,a.Uk)(" 総費用："),(0,a._)("strong",null,(0,l.zw)(t.$filters.currencyJPY(A.cart.total)),1)]),bt])]),(0,a._)("div",ht,[(0,a._)("div",gt,[(0,a.Wm)(X,{to:"/checkout",class:(0,l.C_)(["btn hvr-btn-dark w-100 d-flex justify-content-center align-items-center my-1 order-md-1",{disabled:0===A.cart.carts.length}])},{default:(0,a.w5)((()=>[(0,a.Uk)(" チェックアウト ")])),_:1},8,["class"]),(0,a.Wm)(X,{to:"/products",class:"btn btn-link ps-0 w-100 d-flex justify-content-center justify-content-md-start align-items-center my-1 order-md-6"},{default:(0,a.w5)((()=>[vt,(0,a.Uk)(" ショッピングを続ける ")])),_:1})])])])])),(0,a.Wm)(R,{"del-item":A.tempCart,onGetItem:V.getCart},null,8,["del-item","onGetItem"]),(0,a.Wm)(Q,{page:A.page,onGetItem:V.getCart},null,8,["page","onGetItem"])])])}var ft=s(5743),_t=s(2362);const wt={class:"modal fade",tabindex:"-1",ref:"delModal"},kt={class:"modal-dialog modal-dialog-centered"},xt={class:"modal-content rounded-0 border border-dark border-2 paper"},Ct=(0,a._)("div",{class:"modal-header justify-content-center border-0"},[(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",style:{"z-index":"2"}})],-1),Dt={class:"modal-body px-4 px-lg-5"},Lt=(0,a._)("div",{class:"text-center mb-2 position-absolute",style:{top:"-113px",left:"0"}},[(0,a._)("img",{src:_t,alt:"delete",style:{width:"90px",transform:"scaleX(-1)"}})],-1),It={class:"modal-title"},$t={class:"text-danger fw-bold mx-1"},Mt={class:"modal-footer border-top-0 justify-content-center mb-4"},qt=["disabled"],Ut={key:0,class:"spinner-border spinner-border-sm align-middle",role:"status"},jt=(0,a._)("span",{class:"visually-hidden"},"Loading...",-1),Zt=[jt],zt={key:1,class:"bi bi-trash-fill me-1"};function At(t,e,s,d,i,o){return(0,a.wg)(),(0,a.iD)("div",wt,[(0,a._)("div",kt,[(0,a._)("div",xt,[Ct,(0,a._)("div",Dt,[Lt,(0,a._)("h5",It,[(0,a._)("span",$t,(0,l.zw)(s.delItem.product.title),1),(0,a.Uk)(" を削除してもよろしいですか？食べない心はありますか？ ")])]),(0,a._)("div",Mt,[(0,a._)("button",{type:"button",class:"btn btn-link","data-bs-dismiss":"modal",onClick:e[0]||(e[0]=e=>t.$emit("del-item"))}," キャンセル "),(0,a._)("button",{type:"button",class:"btn btn-outline-danger",onClick:e[1]||(e[1]=t=>o.deleteItem(s.delItem.id)),disabled:i.isLoading===s.delItem.id},[i.isLoading===s.delItem.id?((0,a.wg)(),(0,a.iD)("div",Ut,Zt)):((0,a.wg)(),(0,a.iD)("i",zt)),(0,a.Uk)(" 削除を確認 ")],8,qt)])])])],512)}let Jt=null;var Wt={data(){return{isLoading:"",message:""}},props:["delItem"],methods:{deleteItem(t){this.isLoading=t,this.$http.delete(`https://vue3-course-api.hexschool.io/v2/api/letcla/cart/${t}`).then((t=>{this.isLoading="",this.$emit("get-item"),Jt.hide(),this.message=t.data.message})).catch((t=>{this.isLoading="",Jt.hide(),alert(t.response.data.message)}))}},mounted(){Jt=new bootstrap.Modal(this.$refs.delModal,{keyboard:!1})}},Yt=s(89);const Gt=(0,Yt.Z)(Wt,[["render",At]]);var Pt=Gt,Vt=s(2036),Tt={data(){return{cart:{carts:[]},isLoading:"",cartData:{},tempCart:{product:{}},length:0,page:""}},components:{DelModalComp:Pt,DelAllModalComp:Vt.Z},methods:{getCart(){let t=this.$loading.show();this.$http.get("https://vue3-course-api.hexschool.io/v2/api/letcla/cart").then((e=>{t.hide(),this.cart=e.data.data,ft.Z.emit("get-cart"),0===this.cart.carts.length&&localStorage.removeItem("code")})).catch((e=>{t.hide(),console.dir(e)}))},addItem(t){this.isLoading=t.id,t.qty++,this.cartData={product_id:t.product_id,qty:t.qty},this.updateCart(t)},minusItem(t){t.qty--,t.qty<1?t.qty=1:(this.cartData={product_id:t.product_id,qty:t.qty},this.updateCart(t))},updateCart(t){this.isLoading=t.id,this.$http.put(`https://vue3-course-api.hexschool.io/v2/api/letcla/cart/${t.id}`,{data:this.cartData}).then((()=>{this.isLoading="",this.getCart()})).catch((t=>{this.isLoading="",console.dir(t),alert(t.response.data.message)}))},openDelModal(t){this.tempCart={...t},Jt.show()},openDelAllModal(t){this.page=t,Vt.J.show()},toTop(){window.scrollTo({top:0,behavior:"smooth"})}},mounted(){this.getCart(),this.toTop()}};const Et=(0,Yt.Z)(Tt,[["render",yt]]);var Ot=Et},2362:function(t,e,s){t.exports=s.p+"img/omg.987eb6a1.png"}}]);
//# sourceMappingURL=702.fdd61cc1.js.map