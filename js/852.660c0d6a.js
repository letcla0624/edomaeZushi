"use strict";(self["webpackChunkedomaeZushi"]=self["webpackChunkedomaeZushi"]||[]).push([[852],{5743:function(t,e,s){s.d(e,{Z:function(){return o}});s(7658);function i(t){return{all:t=t||new Map,on:function(e,s){var i=t.get(e);i?i.push(s):t.set(e,[s])},off:function(e,s){var i=t.get(e);i&&(s?i.splice(i.indexOf(s)>>>0,1):t.set(e,[]))},emit:function(e,s){var i=t.get(e);i&&i.slice().map((function(t){t(s)})),(i=t.get("*"))&&i.slice().map((function(t){t(e,s)}))}}}const a=i();var o=a},8852:function(t,e,s){s.r(e),s.d(e,{default:function(){return E}});var i=s(3396),a=s(7139);const o={class:"main"},r={class:"container py-5"},d={class:"text-center py-5"},l=(0,i._)("h2",{class:"display-6"},"＼お気に入りアイテム／",-1),c={key:0},n=["disabled"],u=(0,i._)("i",{class:"bi bi-trash3 me-1"},null,-1),p={key:0,class:"row"},h={class:"text-center my-5","data-aos":"fade-down","data-aos-delay":"300","data-aos-duration":"1000"},g=(0,i._)("i",{class:"bi bi-balloon-heart-fill text-danger fs-2"},null,-1),f=(0,i._)("h3",{class:"h5 mb-5"}," お気に入りとして追加すると、この画面に保存されます。 ",-1),v={key:1,class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-xl-4 row-cols-xxl-5 g-3 mb-5"},b={class:"card sushi-card"},m={class:"img-cover text-center"},w=["src","alt"],_={key:0,class:"badge rounded-pill bg-deep-red px-1 py-2 position-absolute vrl-text ls-xl",style:{height:"auto",left:"1rem",top:"1rem"}},y={class:"card-body"},k={class:"h5 card-title text-truncate"},x={class:"card-text text-truncate"},I={class:"card-footer border-top-0 pb-3"},P={class:"d-flex justify-content-between align-items-center"},D={key:0,class:"mb-0"},C=(0,i._)("span",{class:"align-top"},"¥ ",-1),L={class:"fs-4"},$={key:1,class:"lh-sm text-end"},z={class:"text-secondary fs-7"},F={class:"mb-0"},S={class:"fw-bold text-danger"},Z=(0,i._)("span",{class:"align-top"},"¥ ",-1),j={class:"fs-4"},O={class:"d-flex align-items-center"},q=["title","onClick"],J={key:0,class:"bi bi-balloon-heart-fill text-danger fs-2"},U={key:1,class:"bi bi-balloon-heart fs-2"},N=["onClick","disabled"],W={key:0,class:"spinner-border spinner-border-sm",role:"status"},Y=(0,i._)("span",{class:"visually-hidden"},"Loading...",-1),H=[Y],K={key:1,class:"bi bi-plus-lg fs-5"};function M(t,e,s,Y,M,R){const T=(0,i.up)("RouterLink");return(0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("div",r,[(0,i._)("div",d,[l,0!==M.products.length?((0,i.wg)(),(0,i.iD)("div",c,[(0,i._)("button",{type:"button",class:"btn btn-link",onClick:e[0]||(e[0]=(...t)=>R.deleteFavorite&&R.deleteFavorite(...t)),disabled:0===M.favoriteProdId.length},[u,(0,i.Uk)("すべて削除する ")],8,n)])):(0,i.kq)("",!0)]),0===M.products.length?((0,i.wg)(),(0,i.iD)("div",p,[(0,i._)("div",h,[g,f,(0,i.Wm)(T,{to:"/products",class:"btn hvr-btn-dark"},{default:(0,i.w5)((()=>[(0,i.Uk)(" 今人気のアイテムを見る ")])),_:1})])])):((0,i.wg)(),(0,i.iD)("div",v,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(M.products,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"col",key:e.id},[(0,i._)("div",b,[(0,i.Wm)(T,{to:`/prod/${e.id}`},{default:(0,i.w5)((()=>[(0,i._)("div",m,[(0,i._)("img",{src:e.imageUrl,alt:e.title,class:"card-img-top object-fit-cover w-75"},null,8,w),e.origin_price!==e.price?((0,i.wg)(),(0,i.iD)("span",_," 特別価格 ")):(0,i.kq)("",!0)]),(0,i._)("div",y,[(0,i._)("h4",k,(0,a.zw)(e.title),1),(0,i._)("p",x,(0,a.zw)(e.description),1)])])),_:2},1032,["to"]),(0,i._)("div",I,[(0,i._)("div",P,[e.price===e.origin_price?((0,i.wg)(),(0,i.iD)("p",D,[C,(0,i._)("b",L,(0,a.zw)(t.$filters.thousandths(e.price)),1)])):((0,i.wg)(),(0,i.iD)("div",$,[(0,i._)("del",z,(0,a.zw)(t.$filters.currencyJPY(e.origin_price)),1),(0,i._)("p",F,[(0,i._)("span",S,[Z,(0,i._)("b",j,(0,a.zw)(t.$filters.thousandths(e.price)),1)])])])),(0,i._)("div",O,[(0,i._)("button",{type:"button",class:"btn py-0 favorite-btn border-0",ref_for:!0,ref:e.id,title:M.favoriteProdId.includes(e.id)?"私のお気に入りの解除する":"私のお気に入りに追加",onClick:t=>R.toggleFavorite(e.id)},[M.favoriteProdId.includes(e.id)?((0,i.wg)(),(0,i.iD)("i",J)):((0,i.wg)(),(0,i.iD)("i",U))],8,q),(0,i._)("div",{class:"addToCart btn btn-dark rounded-circle text-white d-flex justify-content-center align-items-center",style:{width:"45px",height:"45px"},onClick:t=>R.addCart(e.id),disabled:M.isLoading===e.id},[M.isLoading===e.id?((0,i.wg)(),(0,i.iD)("div",W,H)):((0,i.wg)(),(0,i.iD)("i",K))],8,N)])])])])])))),128))]))])])}s(7658);var R=s(5743),T={data(){return{products:[],isLoading:"",favoriteProdId:JSON.parse(localStorage.getItem("itemId"))||[]}},inject:["emitter"],methods:{getProducts(){let t=this.$loading.show();this.$http.get("https://vue3-course-api.hexschool.io/v2/api/letcla/products/all").then((e=>{t.hide(),this.products=e.data.products,this.products=this.products.filter((t=>-1!==this.favoriteProdId.indexOf(t.id)))})).catch((e=>{t.hide(),console.dir(e)}))},toggleFavorite(t){const e=this.favoriteProdId.findIndex((e=>e===t));-1===e?this.favoriteProdId.push(t):this.favoriteProdId.splice(e,1),this.$refs[`${t}`][0].classList.add("active"),localStorage.setItem("itemId",JSON.stringify(this.favoriteProdId)),this.getProducts()},addCart(t,e=1){this.isLoading=t;const s={product_id:t,qty:e};this.$http.post("https://vue3-course-api.hexschool.io/v2/api/letcla/cart",{data:s}).then((t=>{this.isLoading="",R.Z.emit("get-cart"),this.emitter.emit("toast-message",{style:"success",content:t.data.message})})).catch((t=>{this.isLoading="",this.emitter.emit("toast-message",{style:"error",content:t.response.data.message})}))},deleteFavorite(){this.favoriteProdId=localStorage.removeItem("itemId")||[],this.getProducts()}},mounted(){this.getProducts()}},A=s(89);const B=(0,A.Z)(T,[["render",M]]);var E=B}}]);
//# sourceMappingURL=852.660c0d6a.js.map